<div class="item-detail" *ngIf="item">
  <div class="image-gallery">
    <button class="prev-button" (click)="previousImage()">←</button>
    <img [src]="item.detailedImages[currentImageIndex]" alt="{{item.title}}">
    <button class="next-button" (click)="nextImage()">→</button>
  </div>

  <div *ngIf="!editMode">
    <h2>{{item.title}}</h2>
    <p>{{item.description}}</p>
    <button (click)="toggleEditMode()">Edytuj</button>
  </div>

  <div *ngIf="editMode">
    <input type="text" [(ngModel)]="item.title" placeholder="Nazwa itemu">
    <textarea [(ngModel)]="item.description" placeholder="Opis itemu"></textarea>
    <button (click)="saveItemDetails()">Zapisz</button>
    <button (click)="toggleEditMode()">Anuluj</button>
  </div>

  <div class="image-management" *ngIf="editMode">
    <h3>Zarządzanie zdjęciami</h3>
    <div *ngFor="let image of item.detailedImages; let i = index">
      <img [src]="image" alt="Detailed image {{i + 1}}">
      <button (click)="removeImage(i)">Usuń</button>
    </div>
    <input type="text" [(ngModel)]="newImageUrl" placeholder="URL nowego zdjęcia">
    <button (click)="addImage()">Dodaj zdjęcie</button>
    <button (click)="addImageFromCamera()">Aparat</button>
  </div>

  <div class="current-rating">
    <p>Ocena: {{item.rating.toFixed(1)}}</p>
    <ngb-rating [max]="5" [rate]="item.rating" [readonly]="true"></ngb-rating>
  </div>
  <div class="comments">
    <h3>Komentarze</h3>
    <div *ngFor="let comment of displayedComments">
      <ngb-rating [max]="5" [rate]="comment.rating" [readonly]="true"></ngb-rating>
      <p>{{comment.text}}</p>
    </div>
    <button *ngIf="item.comments.length > displayedComments.length" (click)="showMoreComments()">Pokaż więcej</button>
  </div>
</div>
